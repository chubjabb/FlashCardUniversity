<!DOCTYPE html>
<html>
<head>
    <title>Anki Deck Sharing</title>
    <style>
        /* Your existing CSS styles */
        body { 
            font-family: Arial, sans-serif; 
            max-width: 800px; 
            margin: 0 auto; 
            padding: 20px;
            line-height: 1.6;
        }
        .deck { 
            border: 1px solid #ddd; 
            padding: 20px; 
            margin: 15px 0; 
            border-radius: 8px;
            background: #f9f9f9;
        }
        .upload-form { 
            margin: 30px 0; 
            padding: 25px;
            border: 2px dashed #ccc;
            border-radius: 8px;
            background: #f0f8ff;
        }
        button { 
            background: #007cba; 
            color: white; 
            border: none; 
            padding: 12px 20px; 
            cursor: pointer;
            border-radius: 4px;
            font-size: 16px;
        }
        button:hover { background: #005a87; }
        button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        input, textarea {
            width: 100%;
            padding: 10px;
            margin: 8px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        .loading {
            color: #666;
            font-style: italic;
        }
        .error {
            color: red;
            background: #ffe6e6;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .success {
            color: green;
            background: #e6ffe6;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .stats {
            font-size: 0.9em;
            color: #666;
        }

.search-filter {
    margin: 30px 0;
    padding: 20px;
    border: 1px solid #ddd;
    border-radius: 8px;
    background: #f8f9fa;
}

.filter-controls {
    margin: 15px 0;
}

.deck-header {
    display: flex;
    justify-content: between;
    align-items: start;
    margin-bottom: 10px;
}

.course-badge {
    background: #e9ecef;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 0.8em;
    color: #495057;
    margin-right: 8px;
}

.university-badge {
    background: #007bff;
    color: white;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 0.8em;
    margin-right: 8px;
}

.deck-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin: 10px 0;
}

.filter-stats {
    background: #e7f3ff;
    padding: 10px;
    border-radius: 4px;
    margin: 10px 0;
}
    </style>

    
    <!-- Load Supabase FIRST -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>

<!-- Enhanced Scrolling Universities Banner -->
<div class="university-banner" style="background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d); color: white; padding: 15px 0; overflow: hidden; position: relative;">
    
    <!-- Banner Label -->
    <div style="position: absolute; left: 20px; top: 50%; transform: translateY(-50%); background: rgba(255,255,255,0.2); padding: 5px 15px; border-radius: 20px; z-index: 3; backdrop-filter: blur(10px);">
        <strong>ğŸ‡¨ğŸ‡¦ Canadian Universities</strong>
    </div>
    
    <div class="banner-content" style="display: flex; animation: scrollBanner 30s linear infinite; margin-left: 180px;">
        <!-- University Set 1 -->
        <div style="display: flex; white-space: nowrap;">
            <!-- Major Research Universities -->
            <span class="uni-item" style="padding: 0 20px; display: flex; align-items: center;">
                <span style="margin-right: 8px;">ğŸ”´</span> University of Toronto
            </span>
            <span class="uni-item" style="padding: 0 20px; display: flex; align-items: center;">
                <span style="margin-right: 8px;">ğŸ”µ</span> UBC
            </span>
            <span class="uni-item" style="padding: 0 20px; display: flex; align-items: center;">
                <span style="margin-right: 8px;">ğŸ”´</span> McGill University
            </span>
            <span class="uni-item" style="padding: 0 20px; display: flex; align-items: center;">
                <span style="margin-right: 8px;">ğŸŸ¡</span> University of Alberta
            </span>
            <span class="uni-item" style="padding: 0 20px; display: flex; align-items: center;">
                <span style="margin-right: 8px;">ğŸŸ </span> University of Waterloo
            </span>
            
            <!-- Ontario Universities -->
            <span class="uni-item" style="padding: 0 20px; display: flex; align-items: center;">
                <span style="margin-right: 8px;">ğŸ”µ</span> Western University
            </span>
            <span class="uni-item" style="padding: 0 20px; display: flex; align-items: center;">
                <span style="margin-right: 8px;">ğŸ”´</span> Queen's University
            </span>
            <span class="uni-item" style="padding: 0 20px; display: flex; align-items: center;">
                <span style="margin-right: 8px;">ğŸŸ¢</span> University of Ottawa
            </span>
            <span class="uni-item" style="padding: 0 20px; display: flex; align-items: center;">
                <span style="margin-right: 8px;">ğŸŸ¡</span> York University
            </span>
            <span class="uni-item" style="padding: 0 20px; display: flex; align-items: center;">
                <span style="margin-right: 8px;">ğŸ”µ</span> McMaster University
            </span>
            
            <!-- Western Canada -->
            <span class="uni-item" style="padding: 0 20px; display: flex; align-items: center;">
                <span style="margin-right: 8px;">ğŸŸ£</span> University of Calgary
            </span>
            <span class="uni-item" style="padding: 0 20px; display: flex; align-items: center;">
                <span style="margin-right: 8px;">ğŸŸ¢</span> University of Victoria
            </span>
            <span class="uni-item" style="padding: 0 20px; display: flex; align-items: center;">
                <span style="margin-right: 8px;">ğŸ”´</span> Simon Fraser University
            </span>
            <span class="uni-item" style="padding: 0 20px; display: flex; align-items: center;">
                <span style="margin-right: 8px;">ğŸŸ¡</span> University of Manitoba
            </span>
            <span class="uni-item" style="padding: 0 20px; display: flex; align-items: center;">
                <span style="margin-right: 8px;">ğŸ”µ</span> University of Saskatchewan
            </span>
            
            <!-- Eastern Canada -->
            <span class="uni-item" style="padding: 0 20px; display: flex; align-items: center;">
                <span style="margin-right: 8px;">ğŸŸ¢</span> Dalhousie University
            </span>
            <span class="uni-item" style="padding: 0 20px; display: flex; align-items: center;">
                <span style="margin-right: 8px;">ğŸ”´</span> University of New Brunswick
            </span>
            <span class="uni-item" style="padding: 0 20px; display: flex; align-items: center;">
                <span style="margin-right: 8px;">ğŸŸ¡</span> Memorial University
            </span>
            <span class="uni-item" style="padding: 0 20px; display: flex; align-items: center;">
                <span style="margin-right: 8px;">ğŸ”µ</span> University of Prince Edward Island
            </span>
            
            <!-- Quebec Universities -->
            <span class="uni-item" style="padding: 0 20px; display: flex; align-items: center;">
                <span style="margin-right: 8px;">ğŸ”´</span> UniversitÃ© de MontrÃ©al
            </span>
            <span class="uni-item" style="padding: 0 20px; display: flex; align-items: center;">
                <span style="margin-right: 8px;">ğŸ”µ</span> UniversitÃ© Laval
            </span>
            <span class="uni-item" style="padding: 0 20px; display: flex; align-items: center;">
                <span style="margin-right: 8px;">ğŸŸ¢</span> Concordia University
            </span>
            
            <!-- Additional Universities -->
            <span class="uni-item" style="padding: 0 20px; display: flex; align-items: center;">
                <span style="margin-right: 8px;">ğŸŸ¡</span> Carleton University
            </span>
            <span class="uni-item" style="padding: 0 20px; display: flex; align-items: center;">
                <span style="margin-right: 8px;">ğŸ”µ</span> University of Guelph
            </span>
            <span class="uni-item" style="padding: 0 20px; display: flex; align-items: center;">
                <span style="margin-right: 8px;">ğŸŸ¢</span> University of Windsor
            </span>
            <span class="uni-item" style="padding: 0 20px; display: flex; align-items: center;">
                <span style="margin-right: 8px;">ğŸ”´</span> University of Regina
            </span>
            <span class="uni-item" style="padding: 0 20px; display: flex; align-items: center;">
                <span style="margin-right: 8px;">ğŸŸ¡</span> University of Lethbridge
            </span>
            <span class="uni-item" style="padding: 0 20px; display: flex; align-items: center;">
                <span style="margin-right: 8px;">ğŸ”µ</span> Thompson Rivers University
            </span>
            <span class="uni-item" style="padding: 0 20px; display: flex; align-items: center;">
                <span style="margin-right: 8px;">ğŸŸ¢</span> University of Northern BC
            </span>
            <span class="uni-item" style="padding: 0 20px; display: flex; align-items: center;">
                <span style="margin-right: 8px;">ğŸ”´</span> Ryerson University
            </span>
            <span class="uni-item" style="padding: 0 20px; display: flex; align-items: center;">
                <span style="margin-right: 8px;">ğŸŸ¡</span> Brock University
            </span>
            <span class="uni-item" style="padding: 0 20px; display: flex; align-items: center;">
                <span style="margin-right: 8px;">ğŸ”µ</span> Trent University
            </span>
            <span class="uni-item" style="padding: 0 20px; display: flex; align-items: center;">
                <span style="margin-right: 8px;">ğŸŸ¢</span> Lakehead University
            </span>
            <span class="uni-item" style="padding: 0 20px; display: flex; align-items: center;">
                <span style="margin-right: 8px;">ğŸ”´</span> Laurentian University
            </span>
            <span class="uni-item" style="padding: 0 20px; display: flex; align-items: center;">
                <span style="margin-right: 8px;">ğŸŸ¡</span> University of Winnipeg
            </span>
            <span class="uni-item" style="padding: 0 20px; display: flex; align-items: center;">
                <span style="margin-right: 8px;">ğŸ”µ</span> Brandon University
            </span>
        </div>
        
        <!-- Duplicate for seamless loop -->
        <div style="display: flex; white-space: nowrap;">
            <!-- Same content as above -->
            <span class="uni-item" style="padding: 0 20px; display: flex; align-items: center;">
                <span style="margin-right: 8px;">ğŸ”´</span> University of Toronto
            </span>
            <span class="uni-item" style="padding: 0 20px; display: flex; align-items: center;">
                <span style="margin-right: 8px;">ğŸ”µ</span> UBC
            </span>
            <!-- ... include all the same universities again ... -->
            <span class="uni-item" style="padding: 0 20px; display: flex; align-items: center;">
                <span style="margin-right: 8px;">ğŸ”µ</span> Brandon University
            </span>
        </div>
    </div>
</div>

<style>
@keyframes scrollBanner {
    0% { transform: translateX(0); }
    100% { transform: translateX(-50%); }
}

.university-banner::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 150px;
    height: 100%;
    background: linear-gradient(to right, #1a2a6c, transparent);
    z-index: 2;
}

.university-banner::after {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    width: 150px;
    height: 100%;
    background: linear-gradient(to left, #fdbb2d, transparent);
    z-index: 2;
}

.uni-item {
    transition: all 0.3s ease;
    opacity: 0.9;
}

.uni-item:hover {
    opacity: 1;
    transform: scale(1.05);
}
</style>

    <!-- How to Use Section -->
<div class="instructions" style="background: #f8f9fa; padding: 30px; border-radius: 10px; margin: 20px 0; border-left: 4px solid #007cba;">
    <h2 style="color: #007cba; margin-top: 0;">ğŸ“– How to Use This Site</h2>
    
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
        <!-- Step 1 -->
        <div class="step" style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
            <div style="background: #007cba; color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; margin-bottom: 10px;">1</div>
            <h3 style="margin: 0 0 10px 0;">Search for Decks</h3>
            <p style="margin: 0; color: #666;">
                Use the search bar to find decks by course name, code, or description. Filter by university or course code to narrow down results.
            </p>
        </div>

        <!-- Step 2 -->
        <div class="step" style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
            <div style="background: #28a745; color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; margin-bottom: 10px;">2</div>
            <h3 style="margin: 0 0 10px 0;">Download Decks</h3>
            <p style="margin: 0; color: #666;">
                Click the "Download Deck" button on any deck card. The .apkg file will download and can be imported directly into Anki.
            </p>
        </div>

        <!-- Step 3 -->
        <div class="step" style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
            <div style="background: #dc3545; color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; margin-bottom: 10px;">3</div>
            <h3 style="margin: 0 0 10px 0;">Upload Your Decks</h3>
            <p style="margin: 0; color: #666;">
                Share your own Anki decks by filling out the upload form. Include your university, course code, and a clear description.
            </p>
        </div>
    </div>

    <!-- Quick Tips -->
    <div style="background: #e7f3ff; padding: 15px; border-radius: 8px; margin-top: 20px;">
        <h4 style="margin: 0 0 10px 0;">ğŸ’¡ Quick Tips:</h4>
        <ul style="margin: 0; color: #666;">
            <li>Make sure you have <a href="https://apps.ankiweb.net/" target="_blank">Anki</a> installed to use downloaded decks</li>
            <li>Use specific course codes in your search (e.g., "BIO101" instead of "biology")</li>
            <li>Only upload .apkg files - these are Anki's package format</li>
            <li>Provide clear descriptions to help others find your decks</li>
        </ul>
    </div>
</div>
    
    <h1>ğŸ”– Anki Deck Sharing Platform</h1>
    <p>Share and discover pre-made Anki decks with the community!</p>
    
    <!-- Upload Form -->
<div class="upload-form">
    <h2>ğŸ“¤ Upload New Anki Deck</h2>
    <form id="uploadForm">
        <input type="text" name="deckName" placeholder="Deck Name (e.g., 'Midterm 1 Review')" required>
        
        <select name="university" id="universitySelect" required>
            <option value="">Select University/College</option>
            <option value="University of Toronto">University of Toronto</option>
            <option value="University of British Columbia">University of British Columbia</option>
            <option value="McGill University">McGill University</option>
            <option value="University of Alberta">University of Alberta</option>
            <option value="University of Waterloo">University of Waterloo</option>
            <option value="University of Calgary">University of Calgary</option>
            <option value="University of Ottawa">University of Ottawa</option>
            <option value="Western University">Western University</option>
            <option value="University of Victoria">University of Victoria</option>
            <option value="Queen's University">Queen's University</option>
            <option value="University of Manitoba">University of Manitoba</option>
            <option value="Simon Fraser University">Simon Fraser University</option>
            <option value="University of Guelph">University of Guelph</option>
            <option value="University of Saskatchewan">University of Saskatchewan</option>
            <option value="York University">York University</option>
            <option value="Carleton University">Carleton University</option>
            <option value="University of Windsor">University of Windsor</option>
            <option value="University of New Brunswick">University of New Brunswick</option>
            <option value="Dalhousie University">Dalhousie University</option>
            <option value="University of Regina">University of Regina</option>
            <option value="University of Lethbridge">University of Lethbridge</option>
            <option value="Other">Other Canadian University</option>
        </select>

<!-- Search and Filter Section -->
<div class="search-filter">
    <h2>ğŸ” Find Decks</h2>
    
    <div class="filter-controls">
        <input type="text" id="searchInput" placeholder="Search by course name, code, or description..." style="width: 100%; padding: 10px; margin: 10px 0;">
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 10px 0;">
            <select id="universityFilter">
                <option value="">All Universities</option>
                <option value="University of Toronto">University of Toronto</option>
                <option value="University of British Columbia">University of British Columbia</option>
                <option value="McGill University">McGill University</option>
                <option value="University of Alberta">University of Alberta</option>
                <option value="University of Waterloo">University of Waterloo</option>
                <option value="University of Calgary">University of Calgary</option>
                <option value="University of Ottawa">University of Ottawa</option>
                <option value="Western University">Western University</option>
                <option value="University of Victoria">University of Victoria</option>
                <option value="Queen's University">Queen's University</option>
                <option value="University of Manitoba">University of Manitoba</option>
                <option value="Simon Fraser University">Simon Fraser University</option>
                <option value="University of Guelph">University of Guelph</option>
                <option value="University of Saskatchewan">University of Saskatchewan</option>
                <option value="York University">York University</option>
                <option value="Carleton University">Carleton University</option>
                <option value="University of Windsor">University of Windsor</option>
                <option value="University of New Brunswick">University of New Brunswick</option>
                <option value="Dalhousie University">Dalhousie University</option>
                <option value="University of Regina">University of Regina</option>
                <option value="University of Lethbridge">University of Lethbridge</option>
                <option value="Other">Other Canadian University</option>
            </select>
            
            <input type="text" id="courseCodeFilter" placeholder="Filter by course code...">
        </div>
        
        <button onclick="clearFilters()" style="background: #666;">Clear Filters</button>
    </div>
    
    <div id="filterResults" style="margin: 10px 0; font-size: 0.9em; color: #666;"></div>
</div>
        <input type="text" name="courseCode" placeholder="Course Code (e.g., BIO101, PSY100)" required>
        <input type="text" name="courseName" placeholder="Course Name (e.g., Introduction to Biology)" required>
        
        <textarea name="description" placeholder="Deck Description (topics covered, number of cards, etc.)" required></textarea>
        <input type="file" name="ankiFile" accept=".apkg,.anki2" required>
        
        <button type="submit" id="uploadButton">Upload Deck</button>
    </form>
    <div id="uploadMessage"></div>
</div>

    <!-- Deck List -->
    <div id="decks-container">
        <h2>ğŸ“š Available Decks</h2>
        <div id="decks-list" class="loading">Loading...</div>
    </div>

    <!-- Load your app.js AFTER Supabase -->
    <script src="app.js"></script>

    <!-- Minimal Footer -->
<footer style="background: #f8f9fa; padding: 30px 0; margin-top: 50px; border-top: 1px solid #e9ecef;">
    <div style="max-width: 800px; margin: 0 auto; padding: 0 20px; text-align: center;">
        <p style="color: #6c757d; margin-bottom: 15px;">
            Enjoying this free service? Consider supporting its development.
        </p>
        
        <form action="https://www.paypal.com/donate" method="post" target="_top" style="display: inline-block;">
            <input type="hidden" name="hosted_button_id" value="X2584JQAXCZNW">
            <button type="submit" style="background: #0070ba; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-size: 14px;">
                ğŸ’ Support This Project
            </button>
        </form>
        
        <p style="color: #6c757d; font-size: 0.8em; margin-top: 15px;">
            &copy; 2024 Anki Deck Sharing
        </p>
    </div>
</footer>
</body>
</html>
