<!DOCTYPE html>
<html>
<head>
    <title>Anki Deck Sharing</title>
    <style>
        /* Your existing CSS styles */
        body { 
            font-family: Arial, sans-serif; 
            max-width: 800px; 
            margin: 0 auto; 
            padding: 20px;
            line-height: 1.6;
        }
        .deck { 
            border: 1px solid #ddd; 
            padding: 20px; 
            margin: 15px 0; 
            border-radius: 8px;
            background: #f9f9f9;
        }
        .upload-form { 
            margin: 30px 0; 
            padding: 25px;
            border: 2px dashed #ccc;
            border-radius: 8px;
            background: #f0f8ff;
        }
        button { 
            background: #007cba; 
            color: white; 
            border: none; 
            padding: 12px 20px; 
            cursor: pointer;
            border-radius: 4px;
            font-size: 16px;
        }
        button:hover { background: #005a87; }
        button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        input, textarea {
            width: 100%;
            padding: 10px;
            margin: 8px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        .loading {
            color: #666;
            font-style: italic;
        }
        .error {
            color: red;
            background: #ffe6e6;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .success {
            color: green;
            background: #e6ffe6;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .stats {
            font-size: 0.9em;
            color: #666;
        }

.search-filter {
    margin: 30px 0;
    padding: 20px;
    border: 1px solid #ddd;
    border-radius: 8px;
    background: #f8f9fa;
}

.filter-controls {
    margin: 15px 0;
}

.deck-header {
    display: flex;
    justify-content: between;
    align-items: start;
    margin-bottom: 10px;
}

.course-badge {
    background: #e9ecef;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 0.8em;
    color: #495057;
    margin-right: 8px;
}

.university-badge {
    background: #007bff;
    color: white;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 0.8em;
    margin-right: 8px;
}

.deck-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin: 10px 0;
}

.filter-stats {
    background: #e7f3ff;
    padding: 10px;
    border-radius: 4px;
    margin: 10px 0;
}
    </style>

    
    <!-- Load Supabase FIRST -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body
    
    <h1>üîñ Anki Deck Sharing Platform</h1>
    <p>Share and discover pre-made Anki decks with the community!</p>

<!-- Minimal Tooltip Instructions -->
<div class="minimal-instructions" style="text-align: center; margin: 20px 0;">
    <div style="display: inline-flex; align-items: center; background: #f8f9fa; padding: 8px 15px; border-radius: 20px; border: 1px solid #e9ecef; font-size: 14px; color: #666;">
        <span style="margin-right: 8px;">üí°</span>
        Need help? 
        <button onclick="showQuickGuide()" style="background: none; border: none; color: #007cba; cursor: pointer; margin-left: 5px; text-decoration: underline;">
            Quick Guide
        </button>
    </div>
</div>

<!-- Hidden Modal -->
<div id="quickGuideModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000;">
    <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 20px; border-radius: 10px; width: 90%; max-width: 400px;">
        <div style="display: flex; justify-content: between; align-items: center; margin-bottom: 15px;">
            <h3 style="margin: 0;">Quick Guide</h3>
            <button onclick="hideQuickGuide()" style="background: none; border: none; font-size: 20px; cursor: pointer;">√ó</button>
        </div>
        
        <div style="font-size: 14px; line-height: 1.5;">
            <p><strong>1. Search:</strong> Use filters to find decks</p>
            <p><strong>2. Download:</strong> Click "Download Deck"</p>
            <p><strong>3. Upload:</strong> Fill form to share decks</p>
            <p><strong>4. Import:</strong> Open .apkg files in Anki</p>
        </div>
        
        <button onclick="hideQuickGuide()" style="background: #007cba; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; margin-top: 15px; width: 100%;">
            Got it!
        </button>
    </div>
</div>

<script>
function showQuickGuide() {
    document.getElementById('quickGuideModal').style.display = 'block';
}

function hideQuickGuide() {
    document.getElementById('quickGuideModal').style.display = 'none';
}
</script>
    
    <!-- Upload Form -->
<div class="upload-form">
    <h2>üì§ Upload New Anki Deck</h2>
    <form id="uploadForm">
        <input type="text" name="deckName" placeholder="Deck Name (e.g., 'Midterm 1 Review')" required>
        
        <select name="university" id="universitySelect" required>
            <option value="">Select University/College</option>
            <option value="University of Toronto">University of Toronto</option>
            <option value="University of British Columbia">University of British Columbia</option>
            <option value="McGill University">McGill University</option>
            <option value="University of Alberta">University of Alberta</option>
            <option value="University of Waterloo">University of Waterloo</option>
            <option value="University of Calgary">University of Calgary</option>
            <option value="University of Ottawa">University of Ottawa</option>
            <option value="Western University">Western University</option>
            <option value="University of Victoria">University of Victoria</option>
            <option value="Queen's University">Queen's University</option>
            <option value="University of Manitoba">University of Manitoba</option>
            <option value="Simon Fraser University">Simon Fraser University</option>
            <option value="University of Guelph">University of Guelph</option>
            <option value="University of Saskatchewan">University of Saskatchewan</option>
            <option value="York University">York University</option>
            <option value="Carleton University">Carleton University</option>
            <option value="University of Windsor">University of Windsor</option>
            <option value="University of New Brunswick">University of New Brunswick</option>
            <option value="Dalhousie University">Dalhousie University</option>
            <option value="University of Regina">University of Regina</option>
            <option value="University of Lethbridge">University of Lethbridge</option>
            <option value="Other">Other Canadian University</option>
        </select>

<!-- Search and Filter Section -->
<div class="search-filter">
    <h2>üîç Find Decks</h2>
    
    <div class="filter-controls">
        <input type="text" id="searchInput" placeholder="Search by course name, code, or description..." style="width: 100%; padding: 10px; margin: 10px 0;">
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 10px 0;">
            <select id="universityFilter">
                <option value="">All Universities</option>
                <option value="University of Toronto">University of Toronto</option>
                <option value="University of British Columbia">University of British Columbia</option>
                <option value="McGill University">McGill University</option>
                <option value="University of Alberta">University of Alberta</option>
                <option value="University of Waterloo">University of Waterloo</option>
                <option value="University of Calgary">University of Calgary</option>
                <option value="University of Ottawa">University of Ottawa</option>
                <option value="Western University">Western University</option>
                <option value="University of Victoria">University of Victoria</option>
                <option value="Queen's University">Queen's University</option>
                <option value="University of Manitoba">University of Manitoba</option>
                <option value="Simon Fraser University">Simon Fraser University</option>
                <option value="University of Guelph">University of Guelph</option>
                <option value="University of Saskatchewan">University of Saskatchewan</option>
                <option value="York University">York University</option>
                <option value="Carleton University">Carleton University</option>
                <option value="University of Windsor">University of Windsor</option>
                <option value="University of New Brunswick">University of New Brunswick</option>
                <option value="Dalhousie University">Dalhousie University</option>
                <option value="University of Regina">University of Regina</option>
                <option value="University of Lethbridge">University of Lethbridge</option>
                <option value="Other">Other Canadian University</option>
            </select>
            
            <input type="text" id="courseCodeFilter" placeholder="Filter by course code...">
        </div>
        
        <button onclick="clearFilters()" style="background: #666;">Clear Filters</button>
    </div>
    
    <div id="filterResults" style="margin: 10px 0; font-size: 0.9em; color: #666;"></div>
</div>
        <input type="text" name="courseCode" placeholder="Course Code (e.g., BIO101, PSY100)" required>
        <input type="text" name="courseName" placeholder="Course Name (e.g., Introduction to Biology)" required>
        
        <textarea name="description" placeholder="Deck Description (topics covered, number of cards, etc.)" required></textarea>
        <input type="file" name="ankiFile" accept=".apkg,.anki2" required>
        
        <button type="submit" id="uploadButton">Upload Deck</button>
    </form>
    <div id="uploadMessage"></div>
</div>

    <!-- Deck List -->
    <div id="decks-container">
        <h2>üìö Available Decks</h2>
        <div id="decks-list" class="loading">Loading...</div>
    </div>

    <!-- Load your app.js AFTER Supabase -->
    <script src="app.js"></script>

    <!-- Minimal Footer -->
<footer style="background: #f8f9fa; padding: 30px 0; margin-top: 50px; border-top: 1px solid #e9ecef;">
    <div style="max-width: 800px; margin: 0 auto; padding: 0 20px; text-align: center;">
        <p style="color: #6c757d; margin-bottom: 15px;">
            Enjoying this free service? Consider supporting its development.
        </p>
        
        <form action="https://www.paypal.com/donate" method="post" target="_top" style="display: inline-block;">
            <input type="hidden" name="hosted_button_id" value="X2584JQAXCZNW">
            <button type="submit" style="background: #0070ba; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-size: 14px;">
                üíù Support This Project
            </button>
        </form>
        
        <p style="color: #6c757d; font-size: 0.8em; margin-top: 15px;">
            &copy; 2024 Anki Deck Sharing
        </p>
    </div>
</footer>
</body>
</html>
